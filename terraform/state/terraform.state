{
  "version": 4,
  "terraform_version": "0.15.4",
  "serial": 664,
  "lineage": "6da5db0b-a41e-5676-a94c-ca815c3419ea",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "digitalocean_certificate",
      "name": "certificate",
      "provider": "provider[\"registry.terraform.io/digitalocean/digitalocean\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "domains": [
              "*.romanow-alex.ru",
              "romanow-alex.ru"
            ],
            "id": "romanow-alex-certificate",
            "name": "romanow-alex-certificate",
            "not_after": "2022-01-16T20:01:49Z",
            "sha1_fingerprint": "7be6f5d2d205565dd8bc4b15646c477664166de4",
            "state": "verified",
            "type": "lets_encrypt",
            "uuid": "0fac0dbc-004b-4d9c-b561-9555f791852e"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "kubernetes_service",
      "name": "nginx-ingress",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "default/nginx-stable-nginx-ingress",
            "metadata": [
              {
                "annotations": {
                  "kubernetes.digitalocean.com/load-balancer-id": "4abaa5cd-9eb7-4c72-ad1f-7a0b6b3be820",
                  "meta.helm.sh/release-name": "nginx-stable",
                  "meta.helm.sh/release-namespace": "default"
                },
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/instance": "nginx-stable",
                  "app.kubernetes.io/managed-by": "Helm",
                  "app.kubernetes.io/name": "nginx-stable-nginx-ingress",
                  "helm.sh/chart": "nginx-ingress-0.11.2"
                },
                "name": "nginx-stable-nginx-ingress",
                "namespace": "default",
                "resource_version": "1616",
                "uid": "e7425887-cc35-420b-b3f5-219ae99a0442"
              }
            ],
            "spec": [
              {
                "cluster_ip": "10.245.184.50",
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "Local",
                "health_check_node_port": 32181,
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "name": "http",
                    "node_port": 31639,
                    "port": 80,
                    "protocol": "TCP",
                    "target_port": "80"
                  },
                  {
                    "name": "https",
                    "node_port": 30465,
                    "port": 443,
                    "protocol": "TCP",
                    "target_port": "80"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app": "nginx-stable-nginx-ingress"
                },
                "session_affinity": "None",
                "type": "LoadBalancer"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": [
                      {
                        "hostname": "",
                        "ip": "161.35.246.241"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "digitalocean_kubernetes_cluster",
      "name": "cluster",
      "provider": "provider[\"registry.terraform.io/digitalocean/digitalocean\"]",
      "instances": [
        {
          "schema_version": 3,
          "attributes": {
            "auto_upgrade": false,
            "cluster_subnet": "10.244.0.0/16",
            "created_at": "2021-10-19 19:58:57 +0000 UTC",
            "endpoint": "https://9959b5fc-0860-48bd-81e9-ef3a1f604b45.k8s.ondigitalocean.com",
            "id": "9959b5fc-0860-48bd-81e9-ef3a1f604b45",
            "ipv4_address": "104.248.195.6",
            "kube_config": [
              {
                "client_certificate": "",
                "client_key": "",
                "cluster_ca_certificate": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURKekNDQWcrZ0F3SUJBZ0lDQm5Vd0RRWUpLb1pJaHZjTkFRRUxCUUF3TXpFVk1CTUdBMVVFQ2hNTVJHbG4KYVhSaGJFOWpaV0Z1TVJvd0dBWURWUVFERXhGck9ITmhZWE1nUTJ4MWMzUmxjaUJEUVRBZUZ3MHlNVEV3TVRreApPVFU0TlRkYUZ3MDBNVEV3TVRreE9UVTROVGRhTURNeEZUQVRCZ05WQkFvVERFUnBaMmwwWVd4UFkyVmhiakVhCk1CZ0dBMVVFQXhNUmF6aHpZV0Z6SUVOc2RYTjBaWElnUTBFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDMVJwQlJKWEpBZEN1ckQrYUQ1R3Ezem1BNkl4WklFb1d1MS9RWTdKdFBETHo4K3MycgpTV2d2RTVtN2dEeWdvSXhoL2w1UW9yVkxBeDZHWHZ0bmhQMWdKLy9kT1hRaUlYbE5SQkhhVEp3WVErZVlKRTBDClZIcmkrQ0dMYjYzNGp3WlZtVTBFRGlLT2tvY0N6VGdJMXdFSDlNYmo0VUlLWGpTUWZMcHhuc2d2ZUNZODNzQisKTU9HZEsxd09ScTF4SmxNcUJXbVNzRHZpeThVQ3lsVlg3M2RFREJwRGpJZ0RzejJvMEJlWDFUajdwWFpTNFB2NQowQVUwdlIwdGErdStuNkhTd0pOQzJmVXN1WFhOeWdIR1Q4bmpScXArWUV0QWVXeEpzclFNbm0ydGl0c0RyOStFCng0U1pBQWF6aE5YZmlkZFZYcGg0bm4xaEpCZXZlK0ZSZEVheEFnTUJBQUdqUlRCRE1BNEdBMVVkRHdFQi93UUUKQXdJQmhqQVNCZ05WSFJNQkFmOEVDREFHQVFIL0FnRUFNQjBHQTFVZERnUVdCQlRWTjlmVUNtLzRycHJ4bko4bgp0T1I3aDg2eERqQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFRUm1hUCsrdjlZeVA1RWZhd2lBTTNZdm9raDRPCnY1SGtKVkExMTNLZDNTdkI1SHBnNlUycVVlSlpISVlxRHhHNzZFcVUvSkg2OEdPclZCeXd4NU5xRlpWR2FVRGUKM0xYOHVhZkhFR1dQYTl6V3pQY0JtLzFMUmJnQTBxNjIzeEduMTdnL3E2SEpOMWhBSmdUQytMZjJseE1QeC8xOQp6L1VieVllMU16eFp3MXEzU3BVZFRzbG5yZ3NvYUErOUlCdDhvWnM4VjlUTk41RWNFOUhHQmZUeFFBKzRneGRjCnRuUUFBVDBzcWVLeE1jdE8weWFvWHZnSWJVd0lxeTBZUlpsQlM0czREcTBRbVQxZUtaalA4a2RzYTREeHRjemkKTXJWQi8rbkw5R0h3cGh4WWF4ZHNUbllqL1BLOFZEUk1zMjVZVGxYSEF6dEtsOThacm5aVnFRa0JOQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K",
                "expires_at": "2021-10-26T20:05:20Z",
                "host": "https://9959b5fc-0860-48bd-81e9-ef3a1f604b45.k8s.ondigitalocean.com",
                "raw_config": "apiVersion: v1\nkind: Config\nclusters:\n- cluster:\n    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURKekNDQWcrZ0F3SUJBZ0lDQm5Vd0RRWUpLb1pJaHZjTkFRRUxCUUF3TXpFVk1CTUdBMVVFQ2hNTVJHbG4KYVhSaGJFOWpaV0Z1TVJvd0dBWURWUVFERXhGck9ITmhZWE1nUTJ4MWMzUmxjaUJEUVRBZUZ3MHlNVEV3TVRreApPVFU0TlRkYUZ3MDBNVEV3TVRreE9UVTROVGRhTURNeEZUQVRCZ05WQkFvVERFUnBaMmwwWVd4UFkyVmhiakVhCk1CZ0dBMVVFQXhNUmF6aHpZV0Z6SUVOc2RYTjBaWElnUTBFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDMVJwQlJKWEpBZEN1ckQrYUQ1R3Ezem1BNkl4WklFb1d1MS9RWTdKdFBETHo4K3MycgpTV2d2RTVtN2dEeWdvSXhoL2w1UW9yVkxBeDZHWHZ0bmhQMWdKLy9kT1hRaUlYbE5SQkhhVEp3WVErZVlKRTBDClZIcmkrQ0dMYjYzNGp3WlZtVTBFRGlLT2tvY0N6VGdJMXdFSDlNYmo0VUlLWGpTUWZMcHhuc2d2ZUNZODNzQisKTU9HZEsxd09ScTF4SmxNcUJXbVNzRHZpeThVQ3lsVlg3M2RFREJwRGpJZ0RzejJvMEJlWDFUajdwWFpTNFB2NQowQVUwdlIwdGErdStuNkhTd0pOQzJmVXN1WFhOeWdIR1Q4bmpScXArWUV0QWVXeEpzclFNbm0ydGl0c0RyOStFCng0U1pBQWF6aE5YZmlkZFZYcGg0bm4xaEpCZXZlK0ZSZEVheEFnTUJBQUdqUlRCRE1BNEdBMVVkRHdFQi93UUUKQXdJQmhqQVNCZ05WSFJNQkFmOEVDREFHQVFIL0FnRUFNQjBHQTFVZERnUVdCQlRWTjlmVUNtLzRycHJ4bko4bgp0T1I3aDg2eERqQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFRUm1hUCsrdjlZeVA1RWZhd2lBTTNZdm9raDRPCnY1SGtKVkExMTNLZDNTdkI1SHBnNlUycVVlSlpISVlxRHhHNzZFcVUvSkg2OEdPclZCeXd4NU5xRlpWR2FVRGUKM0xYOHVhZkhFR1dQYTl6V3pQY0JtLzFMUmJnQTBxNjIzeEduMTdnL3E2SEpOMWhBSmdUQytMZjJseE1QeC8xOQp6L1VieVllMU16eFp3MXEzU3BVZFRzbG5yZ3NvYUErOUlCdDhvWnM4VjlUTk41RWNFOUhHQmZUeFFBKzRneGRjCnRuUUFBVDBzcWVLeE1jdE8weWFvWHZnSWJVd0lxeTBZUlpsQlM0czREcTBRbVQxZUtaalA4a2RzYTREeHRjemkKTXJWQi8rbkw5R0h3cGh4WWF4ZHNUbllqL1BLOFZEUk1zMjVZVGxYSEF6dEtsOThacm5aVnFRa0JOQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K\n    server: https://9959b5fc-0860-48bd-81e9-ef3a1f604b45.k8s.ondigitalocean.com\n  name: do-ams3-k8s-cluster\ncontexts:\n- context:\n    cluster: do-ams3-k8s-cluster\n    user: do-ams3-k8s-cluster-admin\n  name: do-ams3-k8s-cluster\ncurrent-context: do-ams3-k8s-cluster\nusers:\n- name: do-ams3-k8s-cluster-admin\n  user:\n    token: 6108f33050be9c44af0fb181d254714237d74a15e14da9642dc4823032847891\n",
                "token": "6108f33050be9c44af0fb181d254714237d74a15e14da9642dc4823032847891"
              }
            ],
            "name": "k8s-cluster",
            "node_pool": [
              {
                "actual_node_count": 3,
                "auto_scale": false,
                "id": "a4a58cc3-958c-4031-8d81-8dae2677f51c",
                "labels": null,
                "max_nodes": 0,
                "min_nodes": 0,
                "name": "worker-pool",
                "node_count": 3,
                "nodes": [
                  {
                    "created_at": "2021-10-19 19:58:57 +0000 UTC",
                    "droplet_id": "269982415",
                    "id": "6efe49ba-0b5f-48d9-9577-343ce5cab95c",
                    "name": "worker-pool-u78b4",
                    "status": "running",
                    "updated_at": "2021-10-19 20:02:30 +0000 UTC"
                  },
                  {
                    "created_at": "2021-10-19 19:58:57 +0000 UTC",
                    "droplet_id": "269982412",
                    "id": "7ffa1b5c-2a25-42d3-a1ef-81a5312f4541",
                    "name": "worker-pool-u78bi",
                    "status": "running",
                    "updated_at": "2021-10-19 20:02:30 +0000 UTC"
                  },
                  {
                    "created_at": "2021-10-19 19:58:57 +0000 UTC",
                    "droplet_id": "269982414",
                    "id": "6d420044-f5bb-4661-b201-3deb5bb85fcc",
                    "name": "worker-pool-u78bv",
                    "status": "running",
                    "updated_at": "2021-10-19 20:02:30 +0000 UTC"
                  }
                ],
                "size": "s-2vcpu-2gb",
                "tags": [
                  "k8s-cluster"
                ]
              }
            ],
            "region": "ams3",
            "service_subnet": "10.245.0.0/16",
            "status": "running",
            "surge_upgrade": true,
            "tags": null,
            "updated_at": "2021-10-19 20:05:13 +0000 UTC",
            "version": "1.20.9-do.0",
            "vpc_uuid": "619a4572-3caa-460d-bff5-fd4ed1bfb89e"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjMifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "digitalocean_record",
      "name": "base-public",
      "provider": "provider[\"registry.terraform.io/digitalocean/digitalocean\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "domain": "romanow-alex.ru",
            "flags": 0,
            "fqdn": "k8s-cluster.romanow-alex.ru",
            "id": "272123463",
            "name": "k8s-cluster",
            "port": 0,
            "priority": 0,
            "tag": "",
            "ttl": 300,
            "type": "A",
            "value": "161.35.246.241",
            "weight": 0
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.digitalocean_certificate.certificate",
            "data.kubernetes_service.nginx-ingress",
            "digitalocean_kubernetes_cluster.cluster",
            "helm_release.ingress"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "helm_release",
      "name": "ingress",
      "provider": "provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "atomic": false,
            "chart": "nginx-ingress",
            "cleanup_on_fail": false,
            "create_namespace": false,
            "dependency_update": false,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "nginx-stable",
            "keyring": null,
            "lint": false,
            "manifest": null,
            "max_history": 0,
            "metadata": [
              {
                "app_version": "2.0.2",
                "chart": "nginx-ingress",
                "name": "nginx-stable",
                "namespace": "default",
                "revision": 1,
                "values": "{\"controller\":{\"service\":{\"annotations\":{\"service.beta.kubernetes.io/do-loadbalancer-certificate-id\":\"0fac0dbc-004b-4d9c-b561-9555f791852e\",\"service.beta.kubernetes.io/do-loadbalancer-name\":\"loadbalancer\"},\"httpsPort\":{\"targetPort\":80}}}}",
                "version": "0.11.2"
              }
            ],
            "name": "nginx-stable",
            "namespace": "default",
            "postrender": [],
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://helm.nginx.com/stable",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "reuse_values": false,
            "set": [
              {
                "name": "controller.service.annotations.service\\.beta\\.kubernetes\\.io/do-loadbalancer-certificate-id",
                "type": "",
                "value": "0fac0dbc-004b-4d9c-b561-9555f791852e"
              },
              {
                "name": "controller.service.annotations.service\\.beta\\.kubernetes\\.io/do-loadbalancer-name",
                "type": "",
                "value": "loadbalancer"
              },
              {
                "name": "controller.service.httpsPort.targetPort",
                "type": "",
                "value": "80"
              }
            ],
            "set_sensitive": [],
            "skip_crds": false,
            "status": "deployed",
            "timeout": 600,
            "values": null,
            "verify": false,
            "version": "0.11.2",
            "wait": true,
            "wait_for_jobs": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.digitalocean_certificate.certificate",
            "digitalocean_kubernetes_cluster.cluster"
          ]
        }
      ]
    }
  ]
}
