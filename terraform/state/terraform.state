{
  "version": 4,
  "terraform_version": "0.15.4",
  "serial": 39,
  "lineage": "3d10d247-5b90-53ad-ba88-a8bbd9b00109",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "digitalocean_certificate",
      "name": "certificate",
      "provider": "provider[\"registry.terraform.io/digitalocean/digitalocean\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "domains": [
              "*.romanow-alex.ru",
              "romanow-alex.ru"
            ],
            "id": "romanow-alex-certificate",
            "name": "romanow-alex-certificate",
            "not_after": "2022-01-16T20:01:49Z",
            "sha1_fingerprint": "7be6f5d2d205565dd8bc4b15646c477664166de4",
            "state": "verified",
            "type": "lets_encrypt",
            "uuid": "0fac0dbc-004b-4d9c-b561-9555f791852e"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "kubernetes_service",
      "name": "istio-ingress",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "istio-system/istio-ingressgateway",
            "metadata": [
              {
                "annotations": {
                  "kubernetes.digitalocean.com/load-balancer-id": "0fa84a86-bfe3-46de-95f9-77e67e04d139",
                  "meta.helm.sh/release-name": "ingress",
                  "meta.helm.sh/release-namespace": "istio-system"
                },
                "generation": 0,
                "labels": {
                  "app": "istio-ingressgateway",
                  "app.kubernetes.io/managed-by": "Helm",
                  "install.operator.istio.io/owning-resource": "unknown",
                  "istio": "ingressgateway",
                  "istio.io/rev": "default",
                  "operator.istio.io/component": "IngressGateways",
                  "release": "ingress"
                },
                "name": "istio-ingressgateway",
                "namespace": "istio-system",
                "resource_version": "2224",
                "uid": "7f218121-c005-4fde-9c2f-717277183410"
              }
            ],
            "spec": [
              {
                "cluster_ip": "10.245.165.131",
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "Cluster",
                "health_check_node_port": 0,
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "name": "status-port",
                    "node_port": 31450,
                    "port": 15021,
                    "protocol": "TCP",
                    "target_port": "15021"
                  },
                  {
                    "name": "http2",
                    "node_port": 31274,
                    "port": 80,
                    "protocol": "TCP",
                    "target_port": "8080"
                  },
                  {
                    "name": "https",
                    "node_port": 30239,
                    "port": 443,
                    "protocol": "TCP",
                    "target_port": "8443"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app": "istio-ingressgateway",
                  "istio": "ingressgateway"
                },
                "session_affinity": "None",
                "type": "LoadBalancer"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": [
                      {
                        "hostname": "",
                        "ip": "178.128.143.62"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "digitalocean_kubernetes_cluster",
      "name": "cluster",
      "provider": "provider[\"registry.terraform.io/digitalocean/digitalocean\"]",
      "instances": [
        {
          "schema_version": 3,
          "attributes": {
            "auto_upgrade": false,
            "cluster_subnet": "10.244.0.0/16",
            "created_at": "2021-10-21 07:33:37 +0000 UTC",
            "endpoint": "https://b44e9a3c-43da-429d-a23c-bcce44f28918.k8s.ondigitalocean.com",
            "id": "b44e9a3c-43da-429d-a23c-bcce44f28918",
            "ipv4_address": "206.189.106.19",
            "kube_config": [
              {
                "client_certificate": "",
                "client_key": "",
                "cluster_ca_certificate": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURKekNDQWcrZ0F3SUJBZ0lDQm5Vd0RRWUpLb1pJaHZjTkFRRUxCUUF3TXpFVk1CTUdBMVVFQ2hNTVJHbG4KYVhSaGJFOWpaV0Z1TVJvd0dBWURWUVFERXhGck9ITmhZWE1nUTJ4MWMzUmxjaUJEUVRBZUZ3MHlNVEV3TWpFdwpOek16TkRWYUZ3MDBNVEV3TWpFd056TXpORFZhTURNeEZUQVRCZ05WQkFvVERFUnBaMmwwWVd4UFkyVmhiakVhCk1CZ0dBMVVFQXhNUmF6aHpZV0Z6SUVOc2RYTjBaWElnUTBFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDKzlMZkVhMlVzWkpnalNLdFJ6MnJzQ1g0Nnd6MkFDUEpKc2J0NzJ3WTlMaEpVMTRtSwpVT2NRTndYUzQ5RU1IV2hOSTZVSmswNmZQcmJCTDlFQzQyNTQrTXJ3Q1V2MEl3cGYyWkE5YStKVS82MGdpWFptCndyV1B3ekNBM2xCUlM0U1dINTFEUTN6aHNORUlFSnFhZStnT2l5ZHFRcWprVm8vWndwTGNRd3V1WWNHaXN6QVMKNHpka3B4eUlZWkNtSXZFR29HUGJsSkZCSTRjbjIwazhmM0NsMEsyZHRnaUNSMWZJRGNNVWRZbEdEUUZpWnpXWQo1Yjl1REk0SFAvNmpNUy9lcjN5ZGExQlJSOUNhRHpGWDMrZ053VDdjZmNQc3VObG5hZjRmZERrbHdRbXl0cG00CmpXenpZZnZVSGRGNm51dW4rOEgrWm1ZeCtCejBwTE1NRXd0SkFnTUJBQUdqUlRCRE1BNEdBMVVkRHdFQi93UUUKQXdJQmhqQVNCZ05WSFJNQkFmOEVDREFHQVFIL0FnRUFNQjBHQTFVZERnUVdCQlE4QnE5OVhCeEVMajJxUVR4QQpld1VOS2hqRXd6QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFkeUJGbEF5cHJEV0RBNVA2MXFJL1hYRWdZM0dzCnFTRnJMWHRMeXB1Y1pSbVVUR3BDOWExZU94OHVoWnBmRFFRKzFNWmV2L0JJVlFiOWRCSVNUcE8raG9sVnlaeCsKQWRRVmxHZDA5WFJtOFJlZis2YmlnVGNtQmtyeTJESnJsQ2xLM1l3WXBGTVoyNCtQUDFWZ1pZbkdUbjlNa3BkZQpGVzRIdWRRVXNXRnNudExrQmU4MTZFbU5SQUhXVlZVUWhpUHpBamZSdXp5cXlRWnVKTkhnZ216WG5GaVdWYk1NCmhTRHVLM0hsZkc3NXVXTmp0c2JQNU9LWktvcTREY0hNZWtKSjlHTXd1ZHQ2b3BFcWgzcGVVNFFJQ2Znd3ozdjYKckVyYmw1TG80KzNrNWZPcmMrNlI0UHphNDgzWEFISkFoa2FzR3VncndvNmF3dEpIamt1bDhKMEhEUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K",
                "expires_at": "2021-10-28T07:40:08Z",
                "host": "https://b44e9a3c-43da-429d-a23c-bcce44f28918.k8s.ondigitalocean.com",
                "raw_config": "apiVersion: v1\nkind: Config\nclusters:\n- cluster:\n    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURKekNDQWcrZ0F3SUJBZ0lDQm5Vd0RRWUpLb1pJaHZjTkFRRUxCUUF3TXpFVk1CTUdBMVVFQ2hNTVJHbG4KYVhSaGJFOWpaV0Z1TVJvd0dBWURWUVFERXhGck9ITmhZWE1nUTJ4MWMzUmxjaUJEUVRBZUZ3MHlNVEV3TWpFdwpOek16TkRWYUZ3MDBNVEV3TWpFd056TXpORFZhTURNeEZUQVRCZ05WQkFvVERFUnBaMmwwWVd4UFkyVmhiakVhCk1CZ0dBMVVFQXhNUmF6aHpZV0Z6SUVOc2RYTjBaWElnUTBFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDKzlMZkVhMlVzWkpnalNLdFJ6MnJzQ1g0Nnd6MkFDUEpKc2J0NzJ3WTlMaEpVMTRtSwpVT2NRTndYUzQ5RU1IV2hOSTZVSmswNmZQcmJCTDlFQzQyNTQrTXJ3Q1V2MEl3cGYyWkE5YStKVS82MGdpWFptCndyV1B3ekNBM2xCUlM0U1dINTFEUTN6aHNORUlFSnFhZStnT2l5ZHFRcWprVm8vWndwTGNRd3V1WWNHaXN6QVMKNHpka3B4eUlZWkNtSXZFR29HUGJsSkZCSTRjbjIwazhmM0NsMEsyZHRnaUNSMWZJRGNNVWRZbEdEUUZpWnpXWQo1Yjl1REk0SFAvNmpNUy9lcjN5ZGExQlJSOUNhRHpGWDMrZ053VDdjZmNQc3VObG5hZjRmZERrbHdRbXl0cG00CmpXenpZZnZVSGRGNm51dW4rOEgrWm1ZeCtCejBwTE1NRXd0SkFnTUJBQUdqUlRCRE1BNEdBMVVkRHdFQi93UUUKQXdJQmhqQVNCZ05WSFJNQkFmOEVDREFHQVFIL0FnRUFNQjBHQTFVZERnUVdCQlE4QnE5OVhCeEVMajJxUVR4QQpld1VOS2hqRXd6QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFkeUJGbEF5cHJEV0RBNVA2MXFJL1hYRWdZM0dzCnFTRnJMWHRMeXB1Y1pSbVVUR3BDOWExZU94OHVoWnBmRFFRKzFNWmV2L0JJVlFiOWRCSVNUcE8raG9sVnlaeCsKQWRRVmxHZDA5WFJtOFJlZis2YmlnVGNtQmtyeTJESnJsQ2xLM1l3WXBGTVoyNCtQUDFWZ1pZbkdUbjlNa3BkZQpGVzRIdWRRVXNXRnNudExrQmU4MTZFbU5SQUhXVlZVUWhpUHpBamZSdXp5cXlRWnVKTkhnZ216WG5GaVdWYk1NCmhTRHVLM0hsZkc3NXVXTmp0c2JQNU9LWktvcTREY0hNZWtKSjlHTXd1ZHQ2b3BFcWgzcGVVNFFJQ2Znd3ozdjYKckVyYmw1TG80KzNrNWZPcmMrNlI0UHphNDgzWEFISkFoa2FzR3VncndvNmF3dEpIamt1bDhKMEhEUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K\n    server: https://b44e9a3c-43da-429d-a23c-bcce44f28918.k8s.ondigitalocean.com\n  name: do-ams3-k8s-cluster\ncontexts:\n- context:\n    cluster: do-ams3-k8s-cluster\n    user: do-ams3-k8s-cluster-admin\n  name: do-ams3-k8s-cluster\ncurrent-context: do-ams3-k8s-cluster\nusers:\n- name: do-ams3-k8s-cluster-admin\n  user:\n    token: 7542267fcb900d2766c37f6f060d9237a664f2f676787e35a389fc60bf3d263e\n",
                "token": "7542267fcb900d2766c37f6f060d9237a664f2f676787e35a389fc60bf3d263e"
              }
            ],
            "name": "k8s-cluster",
            "node_pool": [
              {
                "actual_node_count": 3,
                "auto_scale": false,
                "id": "9d43f890-4c97-460a-8422-13100b71d419",
                "labels": {},
                "max_nodes": 0,
                "min_nodes": 0,
                "name": "worker-pool",
                "node_count": 3,
                "nodes": [
                  {
                    "created_at": "2021-10-21 07:33:37 +0000 UTC",
                    "droplet_id": "270211658",
                    "id": "caa8cfbb-989d-4c7c-a933-bc25a93fc221",
                    "name": "worker-pool-u7r5n",
                    "status": "running",
                    "updated_at": "2021-10-21 07:37:18 +0000 UTC"
                  },
                  {
                    "created_at": "2021-10-21 07:33:37 +0000 UTC",
                    "droplet_id": "270211659",
                    "id": "8433adad-a733-4877-b329-06b9cd278f79",
                    "name": "worker-pool-u7r53",
                    "status": "running",
                    "updated_at": "2021-10-21 07:37:18 +0000 UTC"
                  },
                  {
                    "created_at": "2021-10-21 07:33:37 +0000 UTC",
                    "droplet_id": "270211660",
                    "id": "2ea1bc66-ee77-4f34-ac4b-3da7f208911a",
                    "name": "worker-pool-u7r58",
                    "status": "running",
                    "updated_at": "2021-10-21 07:37:18 +0000 UTC"
                  }
                ],
                "size": "s-2vcpu-4gb",
                "tags": [
                  "k8s-cluster"
                ]
              }
            ],
            "region": "ams3",
            "service_subnet": "10.245.0.0/16",
            "status": "running",
            "surge_upgrade": true,
            "tags": [],
            "updated_at": "2021-10-21 07:46:40 +0000 UTC",
            "version": "1.20.9-do.0",
            "vpc_uuid": "619a4572-3caa-460d-bff5-fd4ed1bfb89e"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjMifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "digitalocean_record",
      "name": "base-public",
      "provider": "provider[\"registry.terraform.io/digitalocean/digitalocean\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "domain": "romanow-alex.ru",
            "flags": 0,
            "fqdn": "k8s-cluster.romanow-alex.ru",
            "id": "272386406",
            "name": "k8s-cluster",
            "port": 0,
            "priority": 0,
            "tag": "",
            "ttl": 300,
            "type": "A",
            "value": "178.128.143.62",
            "weight": 0
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "digitalocean_kubernetes_cluster.cluster",
            "helm_release.ingress",
            "helm_release.istio-ingress",
            "kubernetes_namespace.istio-system",
            "data.digitalocean_certificate.certificate",
            "data.kubernetes_service.istio-ingress",
            "data.kubernetes_service.nginx-ingress"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "helm_release",
      "name": "discovery",
      "provider": "provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "atomic": false,
            "chart": "discovery",
            "cleanup_on_fail": false,
            "create_namespace": false,
            "dependency_update": false,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "discovery",
            "keyring": null,
            "lint": false,
            "manifest": null,
            "max_history": 0,
            "metadata": [
              {
                "app_version": "",
                "chart": "discovery",
                "name": "discovery",
                "namespace": "istio-system",
                "revision": 1,
                "values": "null",
                "version": "1.10.3"
              }
            ],
            "name": "discovery",
            "namespace": "istio-system",
            "postrender": [],
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://comocomo.github.io/istio-charts",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "reuse_values": false,
            "set": [],
            "set_sensitive": [],
            "skip_crds": false,
            "status": "deployed",
            "timeout": 600,
            "values": null,
            "verify": false,
            "version": "1.10.3",
            "wait": true,
            "wait_for_jobs": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "digitalocean_kubernetes_cluster.cluster",
            "kubernetes_namespace.istio-system"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "helm_release",
      "name": "istio-base",
      "provider": "provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "atomic": false,
            "chart": "base",
            "cleanup_on_fail": false,
            "create_namespace": false,
            "dependency_update": false,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "istio-base",
            "keyring": null,
            "lint": false,
            "manifest": null,
            "max_history": 0,
            "metadata": [
              {
                "app_version": "",
                "chart": "base",
                "name": "istio-base",
                "namespace": "istio-system",
                "revision": 1,
                "values": "null",
                "version": "1.10.3"
              }
            ],
            "name": "istio-base",
            "namespace": "istio-system",
            "postrender": [],
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://comocomo.github.io/istio-charts",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "reuse_values": false,
            "set": [],
            "set_sensitive": [],
            "skip_crds": false,
            "status": "deployed",
            "timeout": 600,
            "values": null,
            "verify": false,
            "version": "1.10.3",
            "wait": true,
            "wait_for_jobs": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "kubernetes_namespace.istio-system",
            "digitalocean_kubernetes_cluster.cluster"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "helm_release",
      "name": "istio-egress",
      "provider": "provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "atomic": false,
            "chart": "egress",
            "cleanup_on_fail": false,
            "create_namespace": false,
            "dependency_update": false,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "egress",
            "keyring": null,
            "lint": false,
            "manifest": null,
            "max_history": 0,
            "metadata": [
              {
                "app_version": "",
                "chart": "egress",
                "name": "egress",
                "namespace": "istio-system",
                "revision": 1,
                "values": "{}",
                "version": "1.10.3"
              }
            ],
            "name": "egress",
            "namespace": "istio-system",
            "postrender": [],
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://comocomo.github.io/istio-charts",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "reuse_values": false,
            "set": [],
            "set_sensitive": [],
            "skip_crds": false,
            "status": "deployed",
            "timeout": 600,
            "values": null,
            "verify": false,
            "version": "1.10.3",
            "wait": true,
            "wait_for_jobs": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "digitalocean_kubernetes_cluster.cluster",
            "kubernetes_namespace.istio-system"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "helm_release",
      "name": "istio-ingress",
      "provider": "provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "atomic": false,
            "chart": "ingress",
            "cleanup_on_fail": false,
            "create_namespace": false,
            "dependency_update": false,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "ingress",
            "keyring": null,
            "lint": false,
            "manifest": null,
            "max_history": 0,
            "metadata": [
              {
                "app_version": "",
                "chart": "ingress",
                "name": "ingress",
                "namespace": "istio-system",
                "revision": 2,
                "values": "{\"gateways\":{\"istio-ingressgateway\":{\"serviceAnnotations\":{\"service.beta.kubernetes.io/do-loadbalancer-certificate-id\":\"0fac0dbc-004b-4d9c-b561-9555f791852e\",\"service.beta.kubernetes.io/do-loadbalancer-name\":\"loadbalancer\"}}}}",
                "version": "1.10.3"
              }
            ],
            "name": "ingress",
            "namespace": "istio-system",
            "postrender": [],
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://comocomo.github.io/istio-charts",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "reuse_values": false,
            "set": [
              {
                "name": "gateways.istio-ingressgateway.serviceAnnotations.service\\.beta\\.kubernetes\\.io/do-loadbalancer-certificate-id",
                "type": null,
                "value": "0fac0dbc-004b-4d9c-b561-9555f791852e"
              },
              {
                "name": "gateways.istio-ingressgateway.serviceAnnotations.service\\.beta\\.kubernetes\\.io/do-loadbalancer-name",
                "type": null,
                "value": "loadbalancer"
              }
            ],
            "set_sensitive": [],
            "skip_crds": false,
            "status": "deployed",
            "timeout": 600,
            "values": null,
            "verify": false,
            "version": "1.10.3",
            "wait": true,
            "wait_for_jobs": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.digitalocean_certificate.certificate",
            "digitalocean_kubernetes_cluster.cluster",
            "kubernetes_namespace.istio-system"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_namespace",
      "name": "istio-system",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "istio-system",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {},
                "name": "istio-system",
                "resource_version": "1229",
                "uid": "d360c367-4b83-43bf-a671-3450c66e1051"
              }
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "digitalocean_kubernetes_cluster.cluster"
          ]
        }
      ]
    }
  ]
}
