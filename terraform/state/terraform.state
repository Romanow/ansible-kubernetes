{
  "version": 4,
  "terraform_version": "0.15.4",
  "serial": 230,
  "lineage": "3d10d247-5b90-53ad-ba88-a8bbd9b00109",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "digitalocean_certificate",
      "name": "certificate",
      "provider": "provider[\"registry.terraform.io/digitalocean/digitalocean\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "domains": [
              "*.romanow-alex.ru",
              "romanow-alex.ru"
            ],
            "id": "romanow-alex-certificate",
            "name": "romanow-alex-certificate",
            "not_after": "2022-01-16T20:01:49Z",
            "sha1_fingerprint": "7be6f5d2d205565dd8bc4b15646c477664166de4",
            "state": "verified",
            "type": "lets_encrypt",
            "uuid": "0fac0dbc-004b-4d9c-b561-9555f791852e"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "digitalocean_kubernetes_cluster",
      "name": "cluster",
      "provider": "provider[\"registry.terraform.io/digitalocean/digitalocean\"]",
      "instances": [
        {
          "schema_version": 3,
          "attributes": {
            "auto_upgrade": false,
            "cluster_subnet": "10.244.0.0/16",
            "created_at": "2021-10-24 14:32:15 +0000 UTC",
            "endpoint": "https://02a0112b-0a92-46af-b2fe-5e4a880adf13.k8s.ondigitalocean.com",
            "id": "02a0112b-0a92-46af-b2fe-5e4a880adf13",
            "ipv4_address": "159.223.0.186",
            "kube_config": [
              {
                "client_certificate": "",
                "client_key": "",
                "cluster_ca_certificate": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURKekNDQWcrZ0F3SUJBZ0lDQm5Vd0RRWUpLb1pJaHZjTkFRRUxCUUF3TXpFVk1CTUdBMVVFQ2hNTVJHbG4KYVhSaGJFOWpaV0Z1TVJvd0dBWURWUVFERXhGck9ITmhZWE1nUTJ4MWMzUmxjaUJEUVRBZUZ3MHlNVEV3TWpReApORE15TWpCYUZ3MDBNVEV3TWpReE5ETXlNakJhTURNeEZUQVRCZ05WQkFvVERFUnBaMmwwWVd4UFkyVmhiakVhCk1CZ0dBMVVFQXhNUmF6aHpZV0Z6SUVOc2RYTjBaWElnUTBFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDenFrOUx1L205K1RtNUkxMjNaL3pxeEVYOURDTlVhdCszZGNPTTUvUzJsSXlIS3F4RQp1Rk1ZaUhzSVdCaEE3RHd1dzBXdjFaTXY3K09SWFRxUjZtS3BWenBkbnQvMGdkbzhUbnIyODVhbDJydnFYN0Q2ClRab1h4SkZzNm01ZXVrUkd2Q05qc3FZRWFZRGdYYUtiVjhiYi84Y2ZDNWJOaEJoaVgyeXVVeXNpcHd2VDhhVVQKaEtDRlBoMDBxeXFLbk9UOWNnUFZHMGRLakk5M3pIa1NocVpianBXZ0hTaG1xdkw3R3pUMFRObzdzMzZCTGNkTwpUSUtaZTllbmVjNDhwL2owUkRONzg0cmFTT0UwTnd6MzN2M29EbEltQUdjbEFNY1V2VzNYTjlKN1FOaDIxVHRaCm5MbTE4T3p3Vjd0bERRRktuMGlTM0NRNUdMR0NDaXJ5dHpGVEFnTUJBQUdqUlRCRE1BNEdBMVVkRHdFQi93UUUKQXdJQmhqQVNCZ05WSFJNQkFmOEVDREFHQVFIL0FnRUFNQjBHQTFVZERnUVdCQlRBNGI1S1FMNm1Zc3ZrU3pTdwpva0JSRkJURHFEQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFUK2NOK1Ezdi93VVNJUHErWFZYTkhTS25mYjA0Cm5WaW5rU2dZYkx2ck9Kb3VJeWwvWnFDa0ZRV3JaVnVxclRuWWRYTmpKcklkS0ZQV1JLMEdmb3FtRTNKNmJWd0MKeVlnVW02Y010aDFqbXBMY0kxVnpoeVp3VUVpc013QW9nSDNlMVZsNmt4Um5jMisvakM0RVpJNy94WU8yZ0c4Rgp1dUNTcTBkNUpWMDllRkNSUmtlS1ZhTEdKbDBUQ0tNb0x3d0FsdGIvZlFGa3Y5S0FRaVpJQUZrc3FsZk5nbHhLCldrc0hqYTZ0ckpmWERTZFFWWEZKL2M4ak1hV0pPUGtEdExINityd0h5aUNEcmJKWVBYUWdVVzEzY21YYkNvTW8KbVkzMFNxZHBnZ2pjYWJkaXVvNnFTUTJCa0NVQ3FiVXV1dzFJWXdEVE9hbWlkQ01XTU54d2ZlVmtHQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K",
                "expires_at": "2021-10-31T14:38:27Z",
                "host": "https://02a0112b-0a92-46af-b2fe-5e4a880adf13.k8s.ondigitalocean.com",
                "raw_config": "apiVersion: v1\nkind: Config\nclusters:\n- cluster:\n    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURKekNDQWcrZ0F3SUJBZ0lDQm5Vd0RRWUpLb1pJaHZjTkFRRUxCUUF3TXpFVk1CTUdBMVVFQ2hNTVJHbG4KYVhSaGJFOWpaV0Z1TVJvd0dBWURWUVFERXhGck9ITmhZWE1nUTJ4MWMzUmxjaUJEUVRBZUZ3MHlNVEV3TWpReApORE15TWpCYUZ3MDBNVEV3TWpReE5ETXlNakJhTURNeEZUQVRCZ05WQkFvVERFUnBaMmwwWVd4UFkyVmhiakVhCk1CZ0dBMVVFQXhNUmF6aHpZV0Z6SUVOc2RYTjBaWElnUTBFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDenFrOUx1L205K1RtNUkxMjNaL3pxeEVYOURDTlVhdCszZGNPTTUvUzJsSXlIS3F4RQp1Rk1ZaUhzSVdCaEE3RHd1dzBXdjFaTXY3K09SWFRxUjZtS3BWenBkbnQvMGdkbzhUbnIyODVhbDJydnFYN0Q2ClRab1h4SkZzNm01ZXVrUkd2Q05qc3FZRWFZRGdYYUtiVjhiYi84Y2ZDNWJOaEJoaVgyeXVVeXNpcHd2VDhhVVQKaEtDRlBoMDBxeXFLbk9UOWNnUFZHMGRLakk5M3pIa1NocVpianBXZ0hTaG1xdkw3R3pUMFRObzdzMzZCTGNkTwpUSUtaZTllbmVjNDhwL2owUkRONzg0cmFTT0UwTnd6MzN2M29EbEltQUdjbEFNY1V2VzNYTjlKN1FOaDIxVHRaCm5MbTE4T3p3Vjd0bERRRktuMGlTM0NRNUdMR0NDaXJ5dHpGVEFnTUJBQUdqUlRCRE1BNEdBMVVkRHdFQi93UUUKQXdJQmhqQVNCZ05WSFJNQkFmOEVDREFHQVFIL0FnRUFNQjBHQTFVZERnUVdCQlRBNGI1S1FMNm1Zc3ZrU3pTdwpva0JSRkJURHFEQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFUK2NOK1Ezdi93VVNJUHErWFZYTkhTS25mYjA0Cm5WaW5rU2dZYkx2ck9Kb3VJeWwvWnFDa0ZRV3JaVnVxclRuWWRYTmpKcklkS0ZQV1JLMEdmb3FtRTNKNmJWd0MKeVlnVW02Y010aDFqbXBMY0kxVnpoeVp3VUVpc013QW9nSDNlMVZsNmt4Um5jMisvakM0RVpJNy94WU8yZ0c4Rgp1dUNTcTBkNUpWMDllRkNSUmtlS1ZhTEdKbDBUQ0tNb0x3d0FsdGIvZlFGa3Y5S0FRaVpJQUZrc3FsZk5nbHhLCldrc0hqYTZ0ckpmWERTZFFWWEZKL2M4ak1hV0pPUGtEdExINityd0h5aUNEcmJKWVBYUWdVVzEzY21YYkNvTW8KbVkzMFNxZHBnZ2pjYWJkaXVvNnFTUTJCa0NVQ3FiVXV1dzFJWXdEVE9hbWlkQ01XTU54d2ZlVmtHQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K\n    server: https://02a0112b-0a92-46af-b2fe-5e4a880adf13.k8s.ondigitalocean.com\n  name: do-ams3-k8s-cluster\ncontexts:\n- context:\n    cluster: do-ams3-k8s-cluster\n    user: do-ams3-k8s-cluster-admin\n  name: do-ams3-k8s-cluster\ncurrent-context: do-ams3-k8s-cluster\nusers:\n- name: do-ams3-k8s-cluster-admin\n  user:\n    token: fe1fbb6b82b57b4c85440fe64d46d2cd4dce86bf5c08508c6a0f74aa5e032acb\n",
                "token": "fe1fbb6b82b57b4c85440fe64d46d2cd4dce86bf5c08508c6a0f74aa5e032acb"
              }
            ],
            "name": "k8s-cluster",
            "node_pool": [
              {
                "actual_node_count": 3,
                "auto_scale": false,
                "id": "024480f3-ab6e-428b-a83e-d0aa0811ec92",
                "labels": {},
                "max_nodes": 0,
                "min_nodes": 0,
                "name": "worker-pool",
                "node_count": 3,
                "nodes": [
                  {
                    "created_at": "2021-10-24 14:32:15 +0000 UTC",
                    "droplet_id": "270680040",
                    "id": "39c1e466-067c-4b45-93b3-4281cf7cb334",
                    "name": "worker-pool-u7ze4",
                    "status": "running",
                    "updated_at": "2021-10-24 14:35:42 +0000 UTC"
                  },
                  {
                    "created_at": "2021-10-24 14:32:15 +0000 UTC",
                    "droplet_id": "270680039",
                    "id": "7b222a50-6a0b-4679-b361-ba0d19a16b02",
                    "name": "worker-pool-u7zei",
                    "status": "running",
                    "updated_at": "2021-10-24 14:35:42 +0000 UTC"
                  },
                  {
                    "created_at": "2021-10-24 14:32:15 +0000 UTC",
                    "droplet_id": "270680041",
                    "id": "5ecb7ec5-37cb-479c-9f09-3399ecd68b01",
                    "name": "worker-pool-u7zev",
                    "status": "running",
                    "updated_at": "2021-10-24 14:35:42 +0000 UTC"
                  }
                ],
                "size": "s-2vcpu-2gb",
                "tags": [
                  "k8s-cluster"
                ]
              }
            ],
            "region": "ams3",
            "service_subnet": "10.245.0.0/16",
            "status": "running",
            "surge_upgrade": true,
            "tags": [],
            "updated_at": "2021-10-24 14:41:03 +0000 UTC",
            "version": "1.20.9-do.0",
            "vpc_uuid": "619a4572-3caa-460d-bff5-fd4ed1bfb89e"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjMifQ=="
        }
      ]
    },
    {
      "module": "module.nginx-ingress[0]",
      "mode": "data",
      "type": "kubernetes_service",
      "name": "nginx-ingress",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "nginx-ingress/nginx-stable-nginx-ingress",
            "metadata": [
              {
                "annotations": {
                  "kubernetes.digitalocean.com/load-balancer-id": "ba271c13-ef30-4b19-aa7f-20de951ed5b3",
                  "meta.helm.sh/release-name": "nginx-stable",
                  "meta.helm.sh/release-namespace": "nginx-ingress"
                },
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/instance": "nginx-stable",
                  "app.kubernetes.io/managed-by": "Helm",
                  "app.kubernetes.io/name": "nginx-stable-nginx-ingress",
                  "helm.sh/chart": "nginx-ingress-0.11.2"
                },
                "name": "nginx-stable-nginx-ingress",
                "namespace": "nginx-ingress",
                "resource_version": "1578",
                "uid": "e6ad163c-8403-4777-8643-727c875ca117"
              }
            ],
            "spec": [
              {
                "cluster_ip": "10.245.123.63",
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "Local",
                "health_check_node_port": 31606,
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "name": "http",
                    "node_port": 31123,
                    "port": 80,
                    "protocol": "TCP",
                    "target_port": "80"
                  },
                  {
                    "name": "https",
                    "node_port": 31423,
                    "port": 443,
                    "protocol": "TCP",
                    "target_port": "80"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app": "nginx-stable-nginx-ingress"
                },
                "session_affinity": "None",
                "type": "LoadBalancer"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": [
                      {
                        "hostname": "",
                        "ip": "161.35.246.194"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.nginx-ingress[0]",
      "mode": "managed",
      "type": "digitalocean_record",
      "name": "base-public",
      "provider": "provider[\"registry.terraform.io/digitalocean/digitalocean\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "domain": "romanow-alex.ru",
            "flags": 0,
            "fqdn": "k8s-cluster.romanow-alex.ru",
            "id": "272968216",
            "name": "k8s-cluster",
            "port": 0,
            "priority": 0,
            "tag": "",
            "ttl": 300,
            "type": "A",
            "value": "161.35.246.194",
            "weight": 0
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.nginx-ingress.data.kubernetes_service.nginx-ingress",
            "module.nginx-ingress.helm_release.ingress",
            "data.digitalocean_certificate.certificate",
            "digitalocean_kubernetes_cluster.cluster"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "domain": "romanow-alex.ru",
            "flags": 0,
            "fqdn": "store.romanow-alex.ru",
            "id": "272968217",
            "name": "store",
            "port": 0,
            "priority": 0,
            "tag": "",
            "ttl": 300,
            "type": "A",
            "value": "161.35.246.194",
            "weight": 0
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "digitalocean_kubernetes_cluster.cluster",
            "module.nginx-ingress.data.kubernetes_service.nginx-ingress"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "domain": "romanow-alex.ru",
            "flags": 0,
            "fqdn": "order.romanow-alex.ru",
            "id": "272968214",
            "name": "order",
            "port": 0,
            "priority": 0,
            "tag": "",
            "ttl": 300,
            "type": "A",
            "value": "161.35.246.194",
            "weight": 0
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "digitalocean_kubernetes_cluster.cluster",
            "module.nginx-ingress.data.kubernetes_service.nginx-ingress"
          ]
        },
        {
          "index_key": 3,
          "schema_version": 0,
          "attributes": {
            "domain": "romanow-alex.ru",
            "flags": 0,
            "fqdn": "warehouse.romanow-alex.ru",
            "id": "272968215",
            "name": "warehouse",
            "port": 0,
            "priority": 0,
            "tag": "",
            "ttl": 300,
            "type": "A",
            "value": "161.35.246.194",
            "weight": 0
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "digitalocean_kubernetes_cluster.cluster",
            "module.nginx-ingress.data.kubernetes_service.nginx-ingress"
          ]
        },
        {
          "index_key": 4,
          "schema_version": 0,
          "attributes": {
            "domain": "romanow-alex.ru",
            "flags": 0,
            "fqdn": "warranty.romanow-alex.ru",
            "id": "272968219",
            "name": "warranty",
            "port": 0,
            "priority": 0,
            "tag": "",
            "ttl": 300,
            "type": "A",
            "value": "161.35.246.194",
            "weight": 0
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "digitalocean_kubernetes_cluster.cluster",
            "module.nginx-ingress.data.kubernetes_service.nginx-ingress"
          ]
        }
      ]
    },
    {
      "module": "module.nginx-ingress[0]",
      "mode": "managed",
      "type": "helm_release",
      "name": "ingress",
      "provider": "provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "atomic": false,
            "chart": "nginx-ingress",
            "cleanup_on_fail": false,
            "create_namespace": true,
            "dependency_update": false,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "nginx-stable",
            "keyring": null,
            "lint": false,
            "manifest": null,
            "max_history": 0,
            "metadata": [
              {
                "app_version": "2.0.2",
                "chart": "nginx-ingress",
                "name": "nginx-stable",
                "namespace": "nginx-ingress",
                "revision": 1,
                "values": "{\"controller\":{\"service\":{\"annotations\":{\"service.beta.kubernetes.io/do-loadbalancer-certificate-id\":\"0fac0dbc-004b-4d9c-b561-9555f791852e\",\"service.beta.kubernetes.io/do-loadbalancer-name\":\"loadbalancer\"},\"httpsPort\":{\"targetPort\":80}}}}",
                "version": "0.11.2"
              }
            ],
            "name": "nginx-stable",
            "namespace": "nginx-ingress",
            "postrender": [],
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://helm.nginx.com/stable",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "reuse_values": false,
            "set": [
              {
                "name": "controller.service.annotations.service\\.beta\\.kubernetes\\.io/do-loadbalancer-certificate-id",
                "type": "",
                "value": "0fac0dbc-004b-4d9c-b561-9555f791852e"
              },
              {
                "name": "controller.service.annotations.service\\.beta\\.kubernetes\\.io/do-loadbalancer-name",
                "type": "",
                "value": "loadbalancer"
              },
              {
                "name": "controller.service.httpsPort.targetPort",
                "type": "",
                "value": "80"
              }
            ],
            "set_sensitive": [],
            "skip_crds": false,
            "status": "deployed",
            "timeout": 600,
            "values": null,
            "verify": false,
            "version": "0.11.2",
            "wait": true,
            "wait_for_jobs": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.digitalocean_certificate.certificate",
            "digitalocean_kubernetes_cluster.cluster"
          ]
        }
      ]
    }
  ]
}
